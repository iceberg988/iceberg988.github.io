<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo/FlamingBytes-icon-64x64-1.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo/FlamingBytes-icon-64x64-1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo/FlamingBytes-icon-64x64-1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.flamingbytes.com","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Download and install updates[ec2-user@ip-192-168-28-223 ~]$ cat &#x2F;etc&#x2F;os-release NAME&#x3D;&quot;Amazon Linux&quot; VERSION&#x3D;&quot;2&quot; ID&#x3D;&quot;amzn&quot; ID_LIKE&#x3D;&quot;centos rhel fedora&quot; VERSION_I">
<meta property="og:type" content="article">
<meta property="og:title" content="How to install and configure PostgreSQL on Amazon Linux">
<meta property="og:url" content="https://www.flamingbytes.com/blog/how-to-install-and-configure-postgresql-on-amazon-linux/index.html">
<meta property="og:site_name" content="FlamingBytes">
<meta property="og:description" content="Download and install updates[ec2-user@ip-192-168-28-223 ~]$ cat &#x2F;etc&#x2F;os-release NAME&#x3D;&quot;Amazon Linux&quot; VERSION&#x3D;&quot;2&quot; ID&#x3D;&quot;amzn&quot; ID_LIKE&#x3D;&quot;centos rhel fedora&quot; VERSION_I">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-05-25T10:48:00.000Z">
<meta property="article:modified_time" content="2023-10-22T18:28:20.000Z">
<meta property="article:author" content="relentlesstorm">
<meta property="article:tag" content="PostgreSQL">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.flamingbytes.com/blog/how-to-install-and-configure-postgresql-on-amazon-linux/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.flamingbytes.com/blog/how-to-install-and-configure-postgresql-on-amazon-linux/","path":"blog/how-to-install-and-configure-postgresql-on-amazon-linux/","title":"How to install and configure PostgreSQL on Amazon Linux"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>How to install and configure PostgreSQL on Amazon Linux | FlamingBytes</title>
  







<!-- Google Adsense-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8578408127828851"
     crossorigin="anonymous"></script>

<!-- Google tag (gtag.js) for analytics-->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B8PQ47L2H0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B8PQ47L2H0');
</script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">FlamingBytes</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">10</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">99</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">258</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Download-and-install-updates"><span class="nav-number">1.</span> <span class="nav-text">Download and install updates</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-PostgreSQL-Amazon-extras-repository"><span class="nav-number">2.</span> <span class="nav-text">Add PostgreSQL Amazon extras repository</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-PostgreSQL-server"><span class="nav-number">3.</span> <span class="nav-text">Install PostgreSQL server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Initialize-the-DB"><span class="nav-number">4.</span> <span class="nav-text">Initialize the DB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-the-PostgreSQL-service-to-the-system-service"><span class="nav-number">5.</span> <span class="nav-text">Add the PostgreSQL service to the system service</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set-password-for-Postgres-user"><span class="nav-number">6.</span> <span class="nav-text">Set password for Postgres user</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Enable-remote-connections-to-PostgreSQL"><span class="nav-number">7.</span> <span class="nav-text">Enable remote connections to PostgreSQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Access-the-PostgreSQL-database-remotely"><span class="nav-number">8.</span> <span class="nav-text">Access the PostgreSQL database remotely</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Using-pgbench-to-run-a-benchmark-test-on-PostgreSQL"><span class="nav-number">9.</span> <span class="nav-text">Using pgbench to run a benchmark test on PostgreSQL</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="relentlesstorm"
      src="/images/logo/FlamingBytes-icon-64x64-1.png">
  <p class="site-author-name" itemprop="name">relentlesstorm</p>
  <div class="site-description" itemprop="description">Stay hungry, stay foolish</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">258</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:relentlesstorm@gmail.com" title="E-Mail → mailto:relentlesstorm@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
        <div class="sidebar-inner sidebar-post-related">
          <div class="animated">
              <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    Related Posts
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/how-to-migrate-the-postgresql-data-directory/" rel="bookmark">
        <time class="popular-posts-time">2023-05-26</time>
        <br>
      How to migrate the PostgreSQL data directory
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/how-to-enable-tcp-connections-to-postgresql/" rel="bookmark">
        <time class="popular-posts-time">2023-05-22</time>
        <br>
      How to enable TCP connections to PostgreSQL
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/getting-started-with-postgresql/" rel="bookmark">
        <time class="popular-posts-time">2023-02-13</time>
        <br>
      Getting started with PostgreSQL
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/run-pgbench-on-postgresql/" rel="bookmark">
        <time class="popular-posts-time">2023-05-23</time>
        <br>
      Run pgbench on PostgreSQL
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/ycsb-benchmark-on-postgresql/" rel="bookmark">
        <time class="popular-posts-time">2023-02-14</time>
        <br>
      YCSB benchmark on PostgreSQL
      </a>
    </li>
  </ul>

          </div>
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.flamingbytes.com/blog/how-to-install-and-configure-postgresql-on-amazon-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo/FlamingBytes-icon-64x64-1.png">
      <meta itemprop="name" content="relentlesstorm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FlamingBytes">
      <meta itemprop="description" content="Stay hungry, stay foolish">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="How to install and configure PostgreSQL on Amazon Linux | FlamingBytes">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          How to install and configure PostgreSQL on Amazon Linux
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-05-25 03:48:00" itemprop="dateCreated datePublished" datetime="2023-05-25T03:48:00-07:00">2023-05-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-10-22 11:28:20" itemprop="dateModified" datetime="2023-10-22T11:28:20-07:00">2023-10-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/" itemprop="url" rel="index"><span itemprop="name">Tech</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Tech/Big-Data/" itemprop="url" rel="index"><span itemprop="name">Big Data</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Download-and-install-updates"><a href="#Download-and-install-updates" class="headerlink" title="Download and install updates"></a>Download and install updates</h2><pre><code>[ec2-user@ip-192-168-28-223 ~]$ cat /etc/os-release
NAME=&quot;Amazon Linux&quot;
VERSION=&quot;2&quot;
ID=&quot;amzn&quot;
ID_LIKE=&quot;centos rhel fedora&quot;
VERSION_ID=&quot;2&quot;
PRETTY_NAME=&quot;Amazon Linux 2&quot;
ANSI_COLOR=&quot;0;33&quot;
CPE_NAME=&quot;cpe:2.3:o:amazon:amazon_linux:2&quot;
HOME_URL=&quot;https://amazonlinux.com/&quot;
[ec2-user@ip-192-168-28-223 ~]$ cat /etc/system-release
Amazon Linux release 2 (Karoo)

[ec2-user@ip-192-168-28-223 ~]$ sudo yum update -y
</code></pre>
<span id="more"></span>    

<h2 id="Add-PostgreSQL-Amazon-extras-repository"><a href="#Add-PostgreSQL-Amazon-extras-repository" class="headerlink" title="Add PostgreSQL Amazon extras repository"></a>Add PostgreSQL Amazon extras repository</h2><p>PostgreSQL is part of the amazon extras library.</p>
<p>To check the available postgresql version in the Amazon extras repository:</p>
<pre><code>[ec2-user@ip-192-168-28-223 ~]$ amazon-linux-extras | grep postgresql
  6  postgresql10             available    [ =10  =stable ]
 41  postgresql11             available    [ =11  =stable ]
 58  postgresql12             available    [ =stable ]
 59  postgresql13             available    [ =stable ]
 63  postgresql14=latest      enabled      [ =stable ]
</code></pre>
<p>To enable the Amazon extras repository:</p>
<pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo amazon-linux-extras enable postgresql14
</code></pre>
<h2 id="Install-PostgreSQL-server"><a href="#Install-PostgreSQL-server" class="headerlink" title="Install PostgreSQL server"></a>Install PostgreSQL server</h2><pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo yum install postgresql-server

Installed:
  postgresql-server.x86_64 0:14.3-2.amzn2.0.1

[ec2-user@ip-192-168-28-223 ~]$ sudo rpm -ql  postgresql-server | grep -v share | grep -v lib
/etc/pam.d/postgresql
/etc/postgresql-setup
/etc/postgresql-setup/upgrade
/etc/postgresql-setup/upgrade/postgresql.conf
/usr/bin/initdb
/usr/bin/pg_basebackup
/usr/bin/pg_checksums
/usr/bin/pg_controldata
/usr/bin/pg_ctl
/usr/bin/pg_receivewal
/usr/bin/pg_recvlogical
/usr/bin/pg_resetwal
/usr/bin/pg_rewind
/usr/bin/pg_verifybackup
/usr/bin/postgres
/usr/bin/postgresql-setup
/usr/bin/postgresql-upgrade
/usr/bin/postmaster
/usr/sbin/postgresql-new-systemd-unit
/var/run/postgresql
</code></pre>
<h2 id="Initialize-the-DB"><a href="#Initialize-the-DB" class="headerlink" title="Initialize the DB"></a>Initialize the DB</h2><pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo postgresql-setup initdb
</code></pre>
<h2 id="Add-the-PostgreSQL-service-to-the-system-service"><a href="#Add-the-PostgreSQL-service-to-the-system-service" class="headerlink" title="Add the PostgreSQL service to the system service"></a>Add the PostgreSQL service to the system service</h2><pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo systemctl start postgresql

[ec2-user@ip-192-168-28-223 ~]$ sudo systemctl enable postgresql

[ec2-user@ip-192-168-28-223 ~]$ sudo systemctl status postgresql
● postgresql.service - PostgreSQL database server
   Loaded: loaded (/usr/lib/systemd/system/postgresql.service; enabled; vendor preset: disabled)
   Active: active (running) since Sat 2023-05-27 19:18:00 UTC; 45s ago
 Main PID: 96673 (postmaster)
   CGroup: /system.slice/postgresql.service
           ├─96673 /usr/bin/postmaster -D /var/lib/pgsql/data
           ├─96674 postgres: logger
           ├─96676 postgres: checkpointer
           ├─96677 postgres: background writer
           ├─96678 postgres: walwriter
           ├─96679 postgres: autovacuum launcher
           ├─96680 postgres: stats collector
           └─96681 postgres: logical replication launcher
[...]
</code></pre>
<h2 id="Set-password-for-Postgres-user"><a href="#Set-password-for-Postgres-user" class="headerlink" title="Set password for Postgres user"></a>Set password for Postgres user</h2><pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo -u postgres psql

postgres=# alter user postgres password &#39;password&#39;;
ALTER ROLE
</code></pre>
<h2 id="Enable-remote-connections-to-PostgreSQL"><a href="#Enable-remote-connections-to-PostgreSQL" class="headerlink" title="Enable remote connections to PostgreSQL"></a>Enable remote connections to PostgreSQL</h2><p>Locate the line that starts with “listen_addresses“ and change it to “listen_addresses &#x3D; ‘*’“. This will allow connections from any IP address. You also can increase the max_connections as needed.</p>
<pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo vi /var/lib/pgsql/data/postgresql.conf
listen_addresses = ‘*’
max_connections = 10000
</code></pre>
<p>Next, open &#x2F;var&#x2F;lib&#x2F;pgsql&#x2F;data&#x2F;pg_hba.conf file to authenticate the remote access with password by modifying the following line.</p>
<pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo vi /var/lib/pgsql/data/pg_hba.conf
host    all          all            0.0.0.0/0  md5
</code></pre>
<p>Restart the PostgreSQL service to take effect:</p>
<pre><code>[ec2-user@ip-192-168-28-223 ~]$ sudo systemctl start postgresql
</code></pre>
<h2 id="Access-the-PostgreSQL-database-remotely"><a href="#Access-the-PostgreSQL-database-remotely" class="headerlink" title="Access the PostgreSQL database remotely"></a>Access the PostgreSQL database remotely</h2><p>Install the psql client:</p>
<pre><code>[ec2-user@ip-192-168-93-151 ~]$ sudo amazon-linux-extras install postgresql14

[ec2-user@ip-192-168-93-151 ~]$ which psql
/usr/bin/psql
</code></pre>
<p>Connect to the remote PostgreSQL server:</p>
<pre><code>[ec2-user@ip-192-168-93-151 ~]$  psql -h 192.168.28.223 -U postgres -d postgres
Password for user postgres:

postgres=# 
</code></pre>
<p>Create a database:</p>
<pre><code>postgres=# CREATE DATABASE testdb;
CREATE DATABASE
postgres=# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 testdb    | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
(4 rows)
</code></pre>
<p>To drop a database:</p>
<pre><code>postgres=# drop database testdb;
DROP DATABASE
</code></pre>
<h2 id="Using-pgbench-to-run-a-benchmark-test-on-PostgreSQL"><a href="#Using-pgbench-to-run-a-benchmark-test-on-PostgreSQL" class="headerlink" title="Using pgbench to run a benchmark test on PostgreSQL"></a>Using pgbench to run a benchmark test on PostgreSQL</h2><p><a target="_blank" rel="noopener" href="https://www.postgresql.org/docs/current/pgbench.html">pgbench</a> is a simple program for running benchmark tests on PostgreSQL. It runs the same sequence of SQL commands over and over, possibly in multiple concurrent database sessions, and then calculates the average transaction rate (transactions per second). By default, pgbench tests a scenario that is loosely based on TPC-B, involving five SELECT, UPDATE, and INSERT commands per transaction. However, it is easy to test other cases by writing your own transaction script files.</p>
<p>Available built-in scripts are: tpcb-like, simple-update and select-only. You also can create your own script for benchmarking.</p>
<p>To install the pgbench:</p>
<pre><code>[ec2-user@ip-192-168-93-151 ~]$ sudo yum install postgresql-contrib

[ec2-user@ip-192-168-93-151 ~]$ which pgbench
/usr/bin/pgbench
</code></pre>
<p>To load data to the target database:</p>
<pre><code>[ec2-user@ip-192-168-93-151 ~]$ pgbench -h 192.168.28.223 -p 5432 -U postgres -i -s 1000 testdb
Password:
dropping old tables...
NOTICE:  table &quot;pgbench_accounts&quot; does not exist, skipping
NOTICE:  table &quot;pgbench_branches&quot; does not exist, skipping
NOTICE:  table &quot;pgbench_history&quot; does not exist, skipping
NOTICE:  table &quot;pgbench_tellers&quot; does not exist, skipping
creating tables...
generating data (client-side)...
100000000 of 100000000 tuples (100%) done (elapsed 213.06 s, remaining 0.00 s)
vacuuming...
creating primary keys...
done in 398.67 s (drop tables 0.00 s, create tables 0.01 s, client-side generate 218.56 s, vacuum 15.52 s, primary keys 164.58 s).
</code></pre>
<p>To run the benchmark on the database:</p>
<pre><code>[ec2-user@ip-192-168-93-151 ~]$ pgbench -h 192.168.28.223 -p 5432 -U postgres -c 200 -j 32 -t 100000 testdb -b simple-update
</code></pre>
<p>Refer to this <a href="https://www.flamingbytes.com/blog/run-pgbench-on-postgresql/">post</a> for more detail on how to run pgbench on PostgreSQL.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/PostgreSQL/" rel="tag"><i class="fa fa-tag"></i> PostgreSQL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/run-pgbench-on-postgresql/" rel="prev" title="Run pgbench on PostgreSQL">
                  <i class="fa fa-angle-left"></i> Run pgbench on PostgreSQL
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/how-to-migrate-the-postgresql-data-directory/" rel="next" title="How to migrate the PostgreSQL data directory">
                  How to migrate the PostgreSQL data directory <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">relentlesstorm</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
